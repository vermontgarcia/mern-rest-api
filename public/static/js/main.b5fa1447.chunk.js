(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(60)},32:function(e,t,a){},34:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(23),r=a.n(o),c=(a(32),a(6)),s=a(7),i=a(9),u=a(8),h=a(10),p=(a(34),a(64)),m=a(57),d=a(11),g=a.n(d),f="localhost:3000"===window.location.host?"http://localhost:3500/api":":3500/api",E=function(e,t){g.a.post("".concat(f,"/auth/signup"),e).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),alert(e.data.msg),t.push("/")}).catch(function(e){alert(e.response.data.msg)})},v=function(e,t){console.log("URL =====> ",f),g.a.post("".concat(f,"/auth/login"),e).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),alert(e.data.msg),t.push("/")}).catch(function(e){alert(e.response.data.msg)})},b=function(e){localStorage.clear(),e.push("/login")},S=function(e){var t=localStorage.getItem("token");g.a.get("".concat(f,"/auth/loggedin"),{headers:{"x-access-token":t}}).then(function(e){}).catch(function(t){alert(t.response.data.msg),localStorage.clear(),e.push("/login")})},y="localhost:3000"===window.location.host?"http://localhost:3500/api":"/api",O=function(e){console.log("Service",e),console.log("URL =====> ",y),g.a.get("".concat(y,"/search/").concat(e.product)).then(function(e){console.log("Search Data =====>",e.data.msg)}).catch(function(e){alert(e.response.data.msg)})},j=function(e){var t=e.handleChange,a=e.title,n=e.type,o=e.name,r=e.placeholder,c=e.autofocus;return l.a.createElement("div",{className:"form-field-envelop"},l.a.createElement("label",{className:"label"},a,l.a.createElement("input",{className:"input",type:n,name:o,placeholder:r,autoFocus:c,onChange:t})))},C=a(61),w=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.user;return l.a.createElement("nav",{className:"nav"},l.a.createElement("div",null,"Menu"),l.a.createElement("div",null,"App logo"),l.a.createElement("div",null,e?l.a.createElement(C.a,{to:"/profile"},l.a.createElement("img",{className:"nav-profile-picture",alt:e.name,src:"avatar"===e.profilePicture?"/avatar.png":e.profilePicture})):null))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){var a=e.state.search;a.product=t.target.value,e.setState({search:a}),O(a)},e.state={search:{}},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")?S(this.props.history):this.props.history.push("/login"),this.props.handleSetState()}},{key:"render",value:function(){var e=this.props.state.user;return l.a.createElement("div",null,l.a.createElement(w,{user:e}),l.a.createElement("div",null,l.a.createElement("h1",null,"Home")),l.a.createElement("div",{className:"home-envelop"},l.a.createElement(j,{name:"search",placeholder:"Search",handleChange:this.handleChange}),l.a.createElement("p",{onClick:this.props.handleLogout},"Logout")))}}]),t}(n.Component),k=function(e){var t=e.className,a=e.name,n=e.type;return l.a.createElement("button",{className:t,type:n},a)},L=a(59),I=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){console.log("login",this.props)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h1",null,"Login")),l.a.createElement("div",{className:"form-envelop"},l.a.createElement("form",{onSubmit:this.props.handleLogin},l.a.createElement("div",{className:"fields-envelop"},l.a.createElement(j,{title:"Email:",type:"email",name:"email",placeholder:"user@copareit.com",handleChange:this.props.handleChange,autofocus:"autofocus"}),l.a.createElement(j,{title:"Password:",type:"password",name:"password",placeholder:"Your password",handleChange:this.props.handleChange})),l.a.createElement("div",{className:"button-envelop"},l.a.createElement(k,{className:"form-button button",type:"submit",name:"Log in"})))),l.a.createElement("div",null,l.a.createElement("p",null,"Don't have an account yet? ",l.a.createElement("span",null,l.a.createElement(L.a,{to:"/signup"},"Register")))))}}]),t}(n.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h1",null,"Signup")),l.a.createElement("div",{className:"form-envelop"},l.a.createElement("form",{onSubmit:this.props.handleSignup},l.a.createElement("div",{className:"fields-envelop"},l.a.createElement(j,{title:"Name:",type:"text",name:"name",placeholder:"What is your name?",handleChange:this.props.handleChange,autofocus:"autofocus"}),l.a.createElement(j,{title:"Email:",type:"email",name:"email",placeholder:"user@copareit.com",handleChange:this.props.handleChange}),l.a.createElement(j,{title:"Password:",type:"password",name:"password",placeholder:"Your password",handleChange:this.props.handleChange}),l.a.createElement(j,{title:"Confirm Password:",type:"password",name:"confirmPassword",placeholder:"Same password",handleChange:this.props.handleChange})),l.a.createElement("div",{className:"button-envelop"},l.a.createElement(k,{className:"form-button button",type:"submit",name:"Sign up"})))),l.a.createElement("div",null,l.a.createElement("p",null,"Already have an account? ",l.a.createElement("span",null,l.a.createElement(L.a,{to:"/login"},"Log in")))))}}]),t}(n.Component),x=function(e){var t=e.title,a=e.name;return l.a.createElement("div",{className:"profile-field-envelop"},l.a.createElement("label",{className:"label"},t,l.a.createElement("p",{className:"data"},a)))},W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={user:{}},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")?S(this.props.history):this.props.history.push("/login"),this.props.handleSetState()}},{key:"render",value:function(){console.log(this.props);var e=this.props.state.user;return console.log("user",e),l.a.createElement("div",null,l.a.createElement(w,{user:e}),l.a.createElement("div",null,l.a.createElement("h1",null,"Profile")),l.a.createElement("div",{className:"profile-data"},l.a.createElement("img",{className:"profile-picture",src:"avatar"===e.profilePicture?"/avatar.png":e.profilePicture,alt:e.name}),l.a.createElement(x,{title:"Name",name:e.name}),l.a.createElement(x,{title:"Email",name:e.email}),l.a.createElement(x,{title:"Role",name:e.role}),l.a.createElement(x,{title:"Status",name:e.status})),l.a.createElement("div",null,l.a.createElement("p",{onClick:this.props.handleLogout},"Logout")))}}]),t}(n.Component),J=function(){return l.a.createElement("h1",null,"Estas perdido mijo")},M=function(e){var t=e.state,a=e.handleLogin,n=e.handleLogout,o=e.handleChange,r=e.handleSignup,c=e.handleSetState;return l.a.createElement(p.a,null,l.a.createElement(m.a,{exact:!0,path:"/",render:function(e){return l.a.createElement(N,Object.assign({handleSetState:c,handleLogout:n,state:t},e))}}),l.a.createElement(m.a,{exact:!0,path:"/login",render:function(e){return l.a.createElement(I,Object.assign({handleLogin:a,handleChange:o},e))}}),l.a.createElement(m.a,{exact:!0,path:"/signup",render:function(e){return l.a.createElement(P,Object.assign({handleSignup:r,handleChange:o},e))}}),l.a.createElement(m.a,{exact:!0,path:"/profile",render:function(e){return l.a.createElement(W,Object.assign({handleSetState:c,handleLogout:n,state:t},e))}}),l.a.createElement(m.a,{path:"*",component:J}))},R=a(63),D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleLogin=function(t){t.preventDefault(),v(e.state.user,e.props.history)},e.handleSignup=function(t){t.preventDefault(),console.log("Signing up....."),E(e.state.user,e.props.history)},e.handleLogout=function(){b(e.props.history)},e.handleChange=function(t){var a=e.state.user;a[t.target.name]=t.target.files?t.target.files[0]:t.target.value,e.setState({user:a})},e.handleRedirect=function(){e.props.history.push("/login")},e.handleSetState=function(){var t=JSON.parse(localStorage.getItem("user"));t?e.setState({user:t}):e.props.history.push("/login")},e.state={user:{}},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));e?this.setState({user:e}):this.props.history.push("/login")}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(M,{state:this.state,handleLogin:this.handleLogin,handleLogout:this.handleLogout,handleSignup:this.handleSignup,handleChange:this.handleChange,handleSetState:this.handleSetState}))}}]),t}(n.Component),A=Object(R.a)(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(62);r.a.render(l.a.createElement(function(){return l.a.createElement(B.a,null,l.a.createElement(A,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.b5fa1447.chunk.js.map