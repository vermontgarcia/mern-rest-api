(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,a){e.exports=a(331)},151:function(e,t,a){},329:function(e,t,a){},331:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(9),o=a.n(l),s=(a(151),a(23)),c=a(24),i=a(26),u=a(25),m=a(27),p=a(337),h=a(241),d=(a(153),a(143)),g=(a(157),a(136)),f=(a(81),a(34)),v=(a(333),a(142)),E=(a(168),a(52)),y=a(46),S=a.n(y),b="localhost"===window.location.hostname?"http://localhost:3500/api":"https://compare-it-mern.herokuapp.com/api",O=function(e,t){S.a.post("".concat(b,"/auth/signup"),e).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),alert(e.data.msg),t.push("/")}).catch(function(e){alert(e.response.data.msg)})},w=function(e,t){console.log("URL =====> ",b),S.a.post("".concat(b,"/auth/login"),e).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),alert(e.data.msg),t.push("/")}).catch(function(e){e.response.data.msg?alert(e.response.data.msg):console.log("No message")})},j=function(e){localStorage.removeItem("token"),e.push("/login")},k=function(e){var t=localStorage.getItem("token");S.a.get("".concat(b,"/auth/loggedin"),{headers:{"x-access-token":t}}).then(function(e){}).catch(function(t){alert(t.response.data.msg),localStorage.removeItem("token"),e.push("/login")})},N="localhost"===window.location.hostname?"http://localhost:3500/api":"https://compare-it-mern.herokuapp.com/api",L=function(e){return console.log("Service =====>",e),console.log("URL =====> ",N),S.a.get("".concat(N,"/search/").concat(e.product))},P=(a(62),a(10)),C=a(334),I=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"nav"},r.a.createElement("div",null,r.a.createElement(P.a,{type:"menu",style:{fontSize:"30px"}})),r.a.createElement("div",null,r.a.createElement(C.a,{to:"/"},r.a.createElement("img",{className:"nav-logo",src:"/search.png",alt:"Logo"}))),r.a.createElement("div",null,e?r.a.createElement(C.a,{to:"/profile"},r.a.createElement("img",{className:"nav-profile-picture",alt:e.name,src:"avatar"===e.profilePicture?"/avatar.png":e.profilePicture})):null))}}]),t}(n.Component),x=(a(332),a(106)),D=x.a.Meta,F=function(e){var t=e.market,a=e.image,n=e.name,l=e.price;return r.a.createElement(x.a,{hoverable:!0,extra:t,cover:r.a.createElement("img",{alt:n,src:a}),actions:[r.a.createElement(P.a,{type:"setting"}),r.a.createElement(P.a,{type:"edit"}),r.a.createElement(P.a,{type:"ellipsis"})]},r.a.createElement(D,{title:l,description:n}))},R=E.a.Header,J=E.a.Footer,T=(E.a.Sider,E.a.Content),q=(v.a.SubMenu,f.a.Search),W=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).toggleCollapsed=function(){e.setState({collapsed:!e.state.collapsed})},e.handleChange=function(t){var a=e.state.search;a.product=t.target.value,e.setState({search:a})},e.handleSearch=function(t){var a=e.state.searching;a=!0,e.setState({searching:a});var n=e.state.search;n.product=t;var r=e.state.items;L(n).then(function(t){console.log("Search Data =====>",t.data.msg),r=t.data.items,localStorage.setItem("items",JSON.stringify(r)),e.setState({items:r}),a=!1,e.setState({searching:a}),console.log("Items from state =====>",e.state.items)}).catch(function(e){e.response.data.msg?alert(e.response.data.msg):console.log("No message")})},e.state={search:{},items:[],searching:!1,collapsed:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")?k(this.props.history):this.props.history.push("/login");var e=JSON.parse(localStorage.getItem("items"));e?this.setState({items:e}):console.log("No items found"),this.props.handleSetState()}},{key:"render",value:function(){var e=this,t=this.state.searching,a=this.props.state.user,n=this.state.items;return console.log("Items initial",n),r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(R,null,r.a.createElement(I,{user:a})),r.a.createElement(T,null,r.a.createElement("div",{className:"home-envelop"},r.a.createElement("div",{className:"input-search"},r.a.createElement(q,{placeholder:"busca un articulo",onSearch:function(t){return e.handleSearch(t)}})),t?r.a.createElement(g.a,null):null,r.a.createElement("div",{className:"cards-envelop"},n?n.map(function(e,t){return r.a.createElement(F,Object.assign({key:t},e))}):r.a.createElement(d.a,{active:!0})),r.a.createElement("p",{onClick:this.props.handleLogout},"Logout"))),r.a.createElement(J,null,"Footer")))}}]),t}(n.Component),A=(a(82),a(40)),M=(a(126),a(79)),B=(a(129),a(41)),U=a(243),V=B.a.Item,Y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||w(t,a.props.history)})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{onSubmit:this.handleSubmit,className:"form-envelop"},r.a.createElement("div",null,r.a.createElement("h1",null,"Login")),r.a.createElement(V,null,e("email",{rules:[{required:!0,message:"Please type your email!"}]})(r.a.createElement(f.a,{prefix:r.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"user@compareit.com"}))),r.a.createElement(V,null,e("password",{rules:[{required:!0,message:"Please type your Password!"}]})(r.a.createElement(f.a,{prefix:r.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Your password"}))),r.a.createElement(V,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(M.a,null,"Remember me")),r.a.createElement(U.a,{className:"login-form-forgot",to:"/forgot"},"Forgot password"),r.a.createElement(A.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Don't have an account yet? ",r.a.createElement(U.a,{to:"/signup"},"Register now!")))}}]),t}(n.Component),z=B.a.create()(Y),H=B.a.Item,$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,autoCompleteResult:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||console.log("Received values of form: ",t)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("The password is not the same!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(B.a,{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("h1",null,"Signup")),r.a.createElement(H,null,e("username",{rules:[{required:!0,message:"Please input your nickname!",whitespace:!0}]})(r.a.createElement(f.a,{prefix:r.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"What is your name"}))),r.a.createElement(H,null,e("email",{rules:[{type:"email",message:"Please enter a valid email!"},{required:!0,message:"Please enter your email!"}]})(r.a.createElement(f.a,{prefix:r.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"user@compareit.com"}))),r.a.createElement(H,null,e("password",{rules:[{required:!0,message:"Please enter your Password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(f.a,{prefix:r.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Your password"}))),r.a.createElement(H,null,e("confirm",{rules:[{required:!0,message:"Please confirm your Password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(f.a,{prefix:r.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm password"}))),r.a.createElement(H,null,e("agreement",{valuePropName:"checked"})(r.a.createElement(M.a,null,"I have read the ",r.a.createElement(U.a,{to:"/agreement"},"agreement"))),r.a.createElement(A.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register"),"Already have an account? ",r.a.createElement(U.a,{to:"/login"},"Log in")))}}]),t}(n.Component),G=B.a.create()($),K=function(e){var t=e.title,a=e.name;return r.a.createElement("div",{className:"profile-field-envelop"},r.a.createElement("label",{className:"label"},t,r.a.createElement("p",{className:"data"},a)))},Q=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={user:{}},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")?k(this.props.history):this.props.history.push("/login"),this.props.handleSetState()}},{key:"render",value:function(){console.log(this.props);var e=this.props.state.user;return console.log("user",e),r.a.createElement("div",null,r.a.createElement(I,{user:e}),r.a.createElement("div",null,r.a.createElement("h1",null,"Profile")),r.a.createElement("div",{className:"profile-data"},r.a.createElement("img",{className:"profile-picture",src:"avatar"===e.profilePicture?"/avatar.png":e.profilePicture,alt:e.name}),r.a.createElement(K,{title:"Name",name:e.name}),r.a.createElement(K,{title:"Email",name:e.email}),r.a.createElement(K,{title:"Role",name:e.role}),r.a.createElement(K,{title:"Status",name:e.status})),r.a.createElement("div",null,r.a.createElement("p",{onClick:this.props.handleLogout},"Logout")))}}]),t}(n.Component),X=function(){return r.a.createElement("h1",null,"Estas perdido mijo")},Z=function(e){var t=e.state,a=e.handleLogin,n=e.handleLogout,l=e.handleChange,o=e.handleSignup,s=e.handleSetState;return r.a.createElement(p.a,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(W,Object.assign({handleSetState:s,handleLogout:n,state:t},e))}}),r.a.createElement(h.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(z,Object.assign({handleLogin:a,handleChange:l},e))}}),r.a.createElement(h.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(G,Object.assign({handleSignup:o,handleChange:l},e))}}),r.a.createElement(h.a,{exact:!0,path:"/profile",render:function(e){return r.a.createElement(Q,Object.assign({handleSetState:s,handleLogout:n,state:t},e))}}),r.a.createElement(h.a,{path:"*",component:X}))},_=a(336),ee=(a(329),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleLogin=function(t){t.preventDefault(),w(e.state.user,e.props.history)},e.handleSignup=function(t){t.preventDefault(),console.log("Signing up....."),O(e.state.user,e.props.history)},e.handleLogout=function(){j(e.props.history)},e.handleChange=function(t){var a=e.state.user;a[t.target.name]=t.target.files?t.target.files[0]:t.target.value,e.setState({user:a})},e.handleRedirect=function(){e.props.history.push("/login")},e.handleSetState=function(){var t=JSON.parse(localStorage.getItem("user"));t?e.setState({user:t}):e.props.history.push("/login")},e.state={user:{}},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));e?this.setState({user:e}):this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Z,{state:this.state,handleLogin:this.handleLogin,handleLogout:this.handleLogout,handleSignup:this.handleSignup,handleChange:this.handleChange,handleSetState:this.handleSetState}))}}]),t}(n.Component)),te=Object(_.a)(ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(335);o.a.render(r.a.createElement(function(){return r.a.createElement(ae.a,null,r.a.createElement(te,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[146,2,1]]]);
//# sourceMappingURL=main.2e110bb4.chunk.js.map